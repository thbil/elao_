<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Syntaxe des enregistrements SPF (Sender Privacy Framework)</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/346/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/346/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/346/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/346/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/346/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/346/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/346/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Syntaxe des enregistrements SPF, cas d&#039;utilisation et options de configuration." />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/346/blog/infra/syntaxe-des-enregistrements-spf-sender-privacy-framework" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Syntaxe des enregistrements SPF (Sender Privacy Framework)" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Syntaxe des enregistrements SPF, cas d&#039;utilisation et options de configuration." />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/346/blog/infra/syntaxe-des-enregistrements-spf-sender-privacy-framework" />
            <meta property="og:site_name" content="elao_" />
                                        <meta property="og:image" content="/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/7435fbf1c4556b362295ba7c8ebdfb38.jpeg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Syntaxe des enregistrements SPF (Sender Privacy Framework)">
            <meta property="twitter:description" content="Syntaxe des enregistrements SPF, cas d&#039;utilisation et options de configuration.">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/7b26298bbc367876ceb957442b2983fd.jpeg">
                    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/346/build/style.fa81b1c5.css">
        
            </head>
    <body>
        <header class="header">
            <div class="container">
                                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/346/">
                        <span class="screen-reader">Syntaxe des enregistrements SPF (Sender Privacy Framework)</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>
                
                                    <!-- Desktop nav -->
                    <nav class="nav">
                        <ul>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/346/nos-services">
                                                                                <span>Services</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/346/methodologie">
                                                                                <span>Méthodologie</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/346/etudes-de-cas">
                                                                                <span>Études de cas</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/346/nos-valeurs">
                                                                                <span>Valeurs</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/346/la-tribu">
                                                                                <span>La tribu</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/346/blog">
                                                                                <span>Blog</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/346/contact">
                                                                                    <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                <span>Contact</span>
                                    </a>
                                </li>
                                                    </ul>
                    </nav>
                
                                    <!-- Mobile nav -->
                    <nav class="nav-mobile">
                        <div class="nav-mobile__header">
                            <a href="/elao_/pr/346/">
                                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                            </a>
                            <button class="nav-toggle nav-toggle--close">
                                <i class="icon icon--close" aria-hidden="true"></i>
                                <span class="screen-reader">Fermer le menu</span>
                            </button>
                        </div>
                        <ul>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/346/nos-services">
                                                                                <span>Services</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/346/methodologie">
                                                                                <span>Méthodologie</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/346/etudes-de-cas">
                                                                                <span>Études de cas</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/346/nos-valeurs">
                                                                                <span>Valeurs</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/346/la-tribu">
                                                                                <span>La tribu</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/346/blog">
                                                                                <span>Blog</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item nav-mobile__item--large">
                                    <a href="/elao_/pr/346/contact">
                                                                                    <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                <span>Contact</span>
                                    </a>
                                </li>
                                                    </ul>
                    </nav>
                    <button class="nav-toggle nav-toggle--open">
                        <i class="icon icon--hamburger" aria-hidden="true"></i>
                        <span class="screen-reader">Ouvrir le menu</span>
                    </button>
                            </div>
        </header>
        <div class="container">
        <main>
                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/346/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumb__item"  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Syntaxe des enregistrements SPF (Sender Privacy Framework)</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
    </ol>

    <div class="article-banner">
        <div class="article-banner__cover" style="background: #f1f1f1 url('/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/8e38c05a194a652d5791d1bd4e077c51.jpeg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/8e38c05a194a652d5791d1bd4e077c51.jpeg') 1x,
        url('/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/08f8d2443cfdce314efb7c40bef64ec3.jpeg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/8e38c05a194a652d5791d1bd4e077c51.jpeg') 1x,
        url('/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/08f8d2443cfdce314efb7c40bef64ec3.jpeg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/8e38c05a194a652d5791d1bd4e077c51.jpeg') 1x,
        url('/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/08f8d2443cfdce314efb7c40bef64ec3.jpeg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/8e38c05a194a652d5791d1bd4e077c51.jpeg') 1x,
        url('/elao_/pr/346/resized/images/posts/thumbnails/mail_bottle.jpeg/08f8d2443cfdce314efb7c40bef64ec3.jpeg') 2x
    );" data-aos="fade-down"></div>

        <div class="article-info" data-aos="zoom-in">
                                        <div class="article-author ">
                    <div class="article-author__image">
                                                    <a href="/elao_/pr/346/la-tribu/gfaivre">
                                <img     src="/elao_/pr/346/resized/images/members/avatars/gfaivre.jpg/ca2671c9059621e5245861b866405c1e.jpg"
    srcset="
        /elao_/pr/346/resized/images/members/avatars/gfaivre.jpg/ca2671c9059621e5245861b866405c1e.jpg 1x,
        /elao_/pr/346/resized/images/members/avatars/gfaivre.jpg/2d8139fabce1703cbfc2438bce9b38a3.jpg 2x
    "
 />
                            </a>
                                            </div>
                    <span class="article-author__info">
                    Écrit par
                                            <a href="/elao_/pr/346/la-tribu/gfaivre">
                            <strong>Guewen Faivre</strong>
                        </a>
                                      </span>
                </div>
                        <div class="article-info__date">
                <span>Publication <strong>5 décembre 2009</strong></span>
                            </div>
        </div>

        <div class="article-header" data-aos="zoom-in-up">
            <h1>Syntaxe des enregistrements SPF (Sender Privacy Framework)</h1>
            <p>Syntaxe des enregistrements SPF, cas d&#039;utilisation et options de configuration.</p>
            <ul class="article-tag-list">
                                    <li class="article-tag-list__item">
                        <a href="/elao_/pr/346/blog/tag/linux" rel="nofollow">#Linux</a>
                    </li>
                                    <li class="article-tag-list__item">
                        <a href="/elao_/pr/346/blog/tag/tips" rel="nofollow">#Tips</a>
                    </li>
                                    <li class="article-tag-list__item">
                        <a href="/elao_/pr/346/blog/tag/spf" rel="nofollow">#Spf</a>
                    </li>
                            </ul>
        </div>
    </div>

    
    <div class="article-content">
        <main class="article-content__main">

            
            <body><p>Dans cet article je vais tenté d'expliquer comment fonctionne actuellement le SPF pour nos emails, mais également de détailler au maximum les différentes options que fournit le framework afin de créer nos propres enregistrements. L'ensemble de ces options peuvent être retrouvées sur le site officiel (anglais): <a href="http://www.openspf.org/SPF_Record_Syntax" title="OpenSPF" target="_blank">OpenSPF.org</a></p>
<p>Le SPF est une spécification publiée le 28 Avril 2006, pour la RFC c'est <a href="http://www.openspf.org/RFC_4408" title="RFC_4408" target="_blank">ici</a></p>
<p>Ce qui suit est une traduction du manuel officiel que l'on peut trouver sur le site ci-dessus: Les noms de domaines définissent 0 ou plusieurs mécanismes. Ces mécanismes peuvent être utilisés pour décrire le paramétrage des hôtes désignés comme serveurs de mail sortant, c'est à dire autorisés à envoyer des emails pour le domaine concerné.</p>
<p><a href="http://www.openspf.org/SPF_Record_Syntax#all" target="_blank">all</a> | <a href="http://www.openspf.org/SPF_Record_Syntax#ip4" target="_blank">ip4</a> | <a href="http://www.openspf.org/SPF_Record_Syntax#ip6" target="_blank">ip6</a> | <a href="http://www.openspf.org/SPF_Record_Syntax#a" target="_blank">a</a> | <a href="http://www.openspf.org/SPF_Record_Syntax#mx" target="_blank">mx</a> | <a href="http://www.openspf.org/SPF_Record_Syntax#ptr" target="_blank">ptr</a> | <a href="http://www.openspf.org/SPF_Record_Syntax#exists" target="_blank">exists</a> | <a href="http://www.openspf.org/SPF_Record_Syntax#include" target="_blank">include</a></p>
<p>Chaque domaine peut également définir des "modificateurs". Chacun d'entre eux ne peut apparaitre <strong>qu'une seule fois</strong> !</p>
<p><a href="http://www.openspf.org/SPF_Record_Syntax#redirect" target="_blank">redirect</a> | <a href="http://www.openspf.org/SPF_Record_Syntax#exp" target="_blank">exp</a></p>
<h3 id="les-mecanismes" class="anchor-title"><a href="#les-mecanismes">Les mécanismes</a></h3>
<p>Les mécanismes peuvent être préfixer par l'un de ces quatres "qualificateurs" :</p>
<ul>
<li>
<p>"+" Pass (A passé la vérification)</p>
</li>
<li>
<p>"-" Fail (Echec)</p>
</li>
<li>
<p>"~" SoftFail (Echec non fatal)</p>
</li>
<li>
<p>"?" Neutral (Neutre)</p>
</li>
<li>
<p>Si un mécanisme abouti, la valeur de son qualificateur est utilisée. Le qualificateur par défaut est "+" (Pass).</p>
</li>
</ul>
<pre class="code-multiline"><code id="13feecd6d90274aef4e5827b80fd64f3">Par exemple: "v=spf1 -all" "v=spf1 a -all" "v=spf1 a mx -all" "v=spf1 +a +mx -all"</code></pre>
<p>Les mécanismes sont évalués dans l'ordre :</p>
<ul>
<li>Si aucun mécanisme ou modificateur ne correspond, la réponse par défaut est "Neutral" (Neutre). <br> Si un domaine n'a pas d'enregistrement SPF, le résultat est "None" (Aucun).</li>
<li>Si un domaine renvoi une erreur temporaire pendant la lecture DNS, vous aurez la réponse "TempError" (Erreur temporaire), elle est aussi appellée "error" dans les anciennes documentations.</li>
<li>Si une erreur de syntaxe ou d'évaluation apparait (par exemple le domaine renvoi un mécanisme non reconnu) le résultat est "PermError" (Erreur permanente, autrefois appellée "Unknow" (inconnue)).</li>
</ul>
<p><strong>L'évaluation d'un enregistrement SPF peut retourner l'un de ces résultats :</strong></p>
<table width="100%" border="1" align="center">
  <tr>
    <td>Résultat</td>
    <td>Explication</td>
    <td>Action résultante</td>
  </tr>
  <tr>
    <td>Pass</td>
    <td>L'enregistrement SPF a désigné l'hôte comme autorisé à envoyer</td>
    <td>Accepté</td>
 </tr>
  <tr>
    <td>Fail</td>
    <td>L'enregistrement SPF a désigné l'hôte comme non autorisé à envoyer</td>
    <td>Rejeté</td>
 </tr>
  <tr>
    <td>SoftFail</td>
    <td>L'enregistrement SPF a désigné l'hôte comme non autorisé à envoyer mais est en cours de transition</td>
    <td>Accepté mais relevé</td>
 </tr>
  <tr>
    <td>Neutral</td>
    <td>L'enregistrement SPF a explicitement renvoyé que rien ne pouvait être dit à propos de la validité de la requête</td>
    <td>Accepté</td>
 </tr>
  <tr>
    <td>None</td>
    <td>Le domaine n'a pas d'enregistrement SPF ou alors l'enregistrement SPF n'évalue pas un résultat</td>
    <td>Accepté</td>
 </tr>
  <tr>
    <td>PermError</td>
    <td>Une erreur permanente a été renvoyée (badly formatted SPF record). (Enregistrement SPF mal formaté)</td>
    <td>Non spécifié</td>
 </tr>
  <tr>
    <td>TempError</td>
    <td>Une erreur passagère (temporaire) est arrivée</td>
    <td>Accepté ou rejeté</td>
  </tr>
</table>
<h3 id="le-mecanisme-all" class="anchor-title"><a href="#le-mecanisme-all">Le mécanisme "all"</a></h3>
<p>Ce mécanisme correspond toujours, on le retrouve habituellement à la fin de l'enregistrement.</p>
<p><strong>Exemples:</strong></p>
<pre class="code-multiline"><code id="a94fda36e5bbd7b984ae385213834a55">"v=spf1 mx -all"</code></pre>
<p><em>Autorise les noms de domaine de type MX à envoyer des mail pour le domaine, interdit tous les autres.</em></p>
<pre class="code-multiline"><code id="8a52b27d1880caa59d5e62749fa7d8e9">"v=spf1 -all"</code></pre>
<p><em>Le domaine n'envoie pas du tout d'email.</em></p>
<pre class="code-multiline"><code id="9085529ae1dfb26e98b9600e947d5301">"v=spf1 +all"</code></pre>
<p><em>Le propriétaire du domaine considère que le SPF est inutile ou alors ne s'en préoccupe pas.</em></p>
<h3 id="le-mecanisme-ip4" class="anchor-title"><a href="#le-mecanisme-ip4">Le mécanisme "ip4"</a></h3>
<pre class="code-multiline"><code id="f62ddc8667787f8e73de447fd50730c3">ip4:
ip4:/</code></pre>
<p>L'argument correspondant au mécanisme "ip4" est une d'adresse de réseau IPv4. S'il n'y a pas de "prefix-length" fourni, /32 est considéré par défaut.</p>
<p><strong>Exemple :</strong></p>
<pre class="code-multiline"><code id="d1f9c0397610a71368fef2d2644e4371">"v=spf1 ip4:192.168.0.1/16 -all"</code></pre>
<p><em>Autorise toutes les adresses IP comprisent entre 192.168.0.1 et 192.168.255.255.</em></p>
<h3 id="le-mecanisme-ip6" class="anchor-title"><a href="#le-mecanisme-ip6">Le mécanisme "ip6"</a></h3>
<pre class="code-multiline"><code id="58f6d8dd8e9654925d4c5c99b48d9dd5">ip6:
ip6:/</code></pre>
<p>L'argument correspondant au mécanisme "ip6" est une d'adresse de réseau IPv6. S'il n'y a pas de "prefix-length" fourni, /128 est considéré par défaut.</p>
<p><strong>Exemple :</strong></p>
<pre class="code-multiline"><code id="88dbb83f878afc14d0a8f7dd38816424">"v=spf1 ip6:1080::8:800:200C:417A/96 -all"</code></pre>
<p><em>Autorise toutes les adresse IPv6 comprise entre 1080::8:800:0000:0000 et 1080::8:800:FFFF:FFFF.</em></p>
<pre class="code-multiline"><code id="feb7f5d613f1e01b195613ea137cb9f3">"v=spf1 ip6:1080::8:800:68.0.3.1/96 -all"</code></pre>
<p><em>Autorise toutes les adresse IPv6 comprise entre 1080::8:800:0000:0000 et 1080::8:800:FFFF:FFFF.</em></p>
<h3 id="le-mecanisme-a" class="anchor-title"><a href="#le-mecanisme-a">Le mécanisme "a"</a></h3>
<pre class="code-multiline"><code id="f09408e3632ad558e29a30dc9119eaff">a
a/
a:
a:/</code></pre>
<p>Tous les enregistrement de type A pour le domaine sont testés. Si l'IP du client est trouvée parmis elles, le mécanisme correspond. Si le domaine n'est pas spécifié, le domaine courant est utilisé. L'enregistrement A doit correspondre exactement à l'adresse IP du client, sans quoi le <code class="code-inline" id="3396712faad713afd5c78cde7c27c363">prefix-length</code> est fourni, auquel cas chaque IP retournée par la recherche A sera étendue à son préfix <a href="http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing" title="CIDR" target="_blank">CIDR</a> correspondant, et l'IP du client sera demandée à l'intérieur de ce sous-réseau.</p>
<p><strong>Exemple :</strong></p>
<pre class="code-multiline"><code id="ddf5def6b4712ebd703027990c98efde">"v=spf1 a -all"</code></pre>
<p>Le domaine courant est utilisé.</p>
<pre class="code-multiline"><code id="faad96eb114b5cb31cb36c0f75d8a302">"v=spf1 a:example.com -all"</code></pre>
<p>Equivalent si le domaine courant est example.com.</p>
<pre class="code-multiline"><code id="3314e24a859af4cf8741ea4db4a36534">"v=spf1 a:mailers.example.com -all"</code></pre>
<p>Peut-être que example.com a choisi de lister explicitement tous les serveurs de courrier sortant dans un enregistrement A special sous mailers.example.com.</p>
<pre class="code-multiline"><code id="3a662299f46b36422a6c562719a40da9">"v=spf1 a/24 a:offsite.example.com/24 -all"</code></pre>
<p>Si example.com est résolu vers 192.0.2.1, la classe C entière de 192.0.2.0/24 sera recherchée pour l'IP du client. De même pour offsite.example.com. Si plus d'un enregistrement de type A a été retourné, chacun d'entre eux sera étendu au sous réseau <a href="http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing" title="CIDR" target="_blank">CIDR</a>.</p>
<h3 id="le-mecanisme-mx" class="anchor-title"><a href="#le-mecanisme-mx">Le mécanisme "mx"</a></h3>
<pre class="code-multiline"><code id="c73413bc3999e0221509134d27e97b34">mx
mx/
mx:
mx:/</code></pre>
<p>L'ensemble des enregistrements A pour tous les enregistrements MX pour le domaine sont testés dans l'ordre de leur priorité. Si l'IP du client est trouvée parmis eux, ce mécanisme correspond. Si le domaine n'est pas spécifié alors le domaine courant est utilisé. L'enregistrement A doit correspondre exactement à l'adresse IP cliente, sans quoi le <code class="code-inline" id="3396712faad713afd5c78cde7c27c363">prefix-length</code> est fourni, auquel cas chaque IP retournée par la recherche A sera étendue à son préfix <a href="http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing" title="CIDR" target="_blank">CIDR</a> correspondant, et l'IP du client sera demandée à l'intérieur de ce sous-réseau.</p>
<p><strong>Exemples :</strong></p>
<pre class="code-multiline"><code id="1563a69bf60f6eb2ef8f2eeba066536a">"v=spf1 mx mx:deferrals.domain.com -all"</code></pre>
<p>Peut être qu'un domaine a envoyé un mail via ce serveur MX ainsi qu'avec un autre ensemble de serveur dont le rôle est de retenter l'envoi pour les domaines dont la distribution a été différée.</p>
<pre class="code-multiline"><code id="258d5425e74e92a3f27925a9c4bfc73c">"v=spf1 mx/24 mx:offsite.domain.com/24 -all"</code></pre>
<p>Peut être qu'un serveur MX de domaine à reçu un mail sur une adresse IP, mais a envoyé le mail sur une adresse IP différente mais proche.</p></body>
                                                </main>
        <aside class="article-content__aside">
                    </aside>
    </div>

    <div class="article-footer" data-aos="fade-in">
                                    <div class="article-author">
                    <div class="article-author__image">
                        <a href="/elao_/pr/346/la-tribu/gfaivre">
                            <img     src="/elao_/pr/346/resized/images/members/avatars/gfaivre.jpg/ca2671c9059621e5245861b866405c1e.jpg"
    srcset="
        /elao_/pr/346/resized/images/members/avatars/gfaivre.jpg/ca2671c9059621e5245861b866405c1e.jpg 1x,
        /elao_/pr/346/resized/images/members/avatars/gfaivre.jpg/2d8139fabce1703cbfc2438bce9b38a3.jpg 2x
    "
 />
                        </a>
                    </div>
                    <span class="article-author__info">
                        Écrit par
                        <a href="/elao_/pr/346/la-tribu/gfaivre">
                            <strong>Guewen Faivre</strong>
                        </a>
                    </span>

                    <div class="article-author__social">
                                                    <a href="https://twitter.com/guewen_faivre" class="social social--small">
                                <i class="icon icon--twitter" aria-hidden="true"></i>
                                <span class="screen-reader">Compte twitter de Guewen Faivre</span>
                            </a>
                                                                            <a href="https://github.com/gfaivre " class="social social--small">
                                <i class="icon icon--github" aria-hidden="true"></i>
                                <span class="screen-reader">Compte github de Guewen Faivre</span>
                            </a>
                                                                            <a href="http://www.elao.com" class="social social--small">
                                <i class="icon icon--website" aria-hidden="true"></i>
                                <span class="screen-reader">Site personnel de Guewen Faivre</span>
                            </a>
                                            </div>
                </div>
                        </div>

            <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/job-og-images+resizes/content/blog/infra/syntaxe-des-enregistrements-spf-sender-privacy-framework.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </main>
                    <footer class="footer">
                <section class="footer__links">
                    <p class="h1">
                        elao
                        <span>développe</span>
                         <span>du lien</span>
                    </p>
                    <div class="links">
                                                    <ul>
                                                            <li>
                                    <a href="/elao_/pr/346/nos-services">Services</a>
                                </li>
                                                            <li>
                                    <a href="/elao_/pr/346/methodologie">Méthodologie</a>
                                </li>
                                                            <li>
                                    <a href="/elao_/pr/346/etudes-de-cas">Études de cas</a>
                                </li>
                                                        </ul>
                                                    <ul>
                                                            <li>
                                    <a href="/elao_/pr/346/nos-valeurs">Valeurs</a>
                                </li>
                                                            <li>
                                    <a href="/elao_/pr/346/la-tribu">La tribu</a>
                                </li>
                                                            <li>
                                    <a href="/elao_/pr/346/blog">Blog</a>
                                </li>
                                                        </ul>
                                                    <ul>
                                                            <li>
                                    <a href="/elao_/pr/346/contact">Contact</a>
                                </li>
                                                        </ul>
                                                <ul>
                            <li>
                                                                <a href="/elao_/pr/346/recrutement">
                                    Nous recrutons
                                                                            <span class="bullet">2</span>
                                                                    </a>
                            </li>
                        </ul>
                    </div>
                    <div class="socials">
                        <ul>
                            <li>
                                <a href="https://github.com/elao" target="_blank">
                                    <i class="icon icon--github"></i>
                                    Github
                                </a>
                            </li>
                            <li>
                                <a href="https://twitter.com/elao" target="_blank">
                                    <i class="icon icon--twitter"></i>
                                    Twitter
                                </a>
                            </li>
                            <li>
                                <a href="https://www.instagram.com/hello_elao_/" target="_blank">
                                    <i class="icon icon--instagram"></i>
                                    Instagram
                                </a>
                            </li>
                        </ul>
                    </div>
                </section>
                <section class="footer__legals">
                    <span>© 2005 - 2021 - ELAO - Tous droits réservés</span>
                    <a href="/elao_/pr/346/legal">Mentions légales</a>
                    <a href="/elao_/pr/346/confidentialite">Protection des données</a>
                </section>
            </footer>
        </div>
                                <script src="/elao_/pr/346/build/runtime.dba779fa.js" defer></script><script src="/elao_/pr/346/build/40.38998a60.js" defer></script><script src="/elao_/pr/346/build/app.118167f3.js" defer></script>
        

        </body>
</html>
