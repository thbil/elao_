<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Elao_</title>

                    <!-- Open Graph / Facebook -->
             <meta property="og:title" content="Elao_" />
            <meta property="og:locale" content="fr" />
            <meta name="description" content="Elao est un atelier de co-conception d&#039;applications web et mobile sur mesure." />
            <meta property="og:description" content="Elao est un atelier de co-conception d&#039;applications web et mobile sur mesure." />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/42/blog/tech/configuration-de-bind-sous-mac-os-x" />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/42/blog/tech/configuration-de-bind-sous-mac-os-x" />
            <meta property="og:site_name" content="elao_" />
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary">
            <meta property="twitter:title" content="Elao_">
            <meta property="twitter:description" content="Elao est un atelier de co-conception d&#039;applications web et mobile sur mesure.">
            <meta property="twitter:site" content="@tom32i">
            <meta property="twitter:creator" content="@tom32i">
                    
                    <link rel="stylesheet" href="/elao_/pr/42/build/style.303f0a03.css">
            </head>
    <body>
        <header class="header">
            <div class="container">
                                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/42/">
                        <span class="screen-reader">Elao_</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>
                
                
                                    <!--
                        Todo :
                        - open / close mobile nav on click on .nav-toggle buttons
                        - when mobile nav is open, .body is .body.no-scroll to prevent background scroll
                     -->
                    <!-- Desktop nav -->
                    <nav class="nav">
                        <ul>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/42/nos-services">
                                                                                <span>Nos services</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/42/methodo">
                                                                                <span>Notre méthodologie</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/42/nos-valeurs">
                                                                                <span>Nos valeurs</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/42/la-tribu/">
                                                                                <span>La tribu</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/42/blog/">
                                                                                <span>Blog</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/42/contact">
                                                                                    <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                <span>Contact</span>
                                    </a>
                                </li>
                                                    </ul>
                    </nav>
                
                                    <!-- Mobile nav -->
                    <nav class="nav-mobile">
                        <div class="nav-mobile__header">
                            <a href="/elao_/pr/42/">
                                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                            </a>
                            <button class="nav-toggle nav-toggle--close">
                                <i class="icon icon--close" aria-hidden="true"></i>
                                <span class="screen-reader">Fermer le menu</span>
                            </button>
                        </div>
                        <ul>
                                                            <li class="nav-mobile__item">
                                    <a href="/elao_/pr/42/nos-services">
                                                                                <span>Nos services</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item">
                                    <a href="/elao_/pr/42/methodo">
                                                                                <span>Notre méthodologie</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item">
                                    <a href="/elao_/pr/42/etudes-de-cas/">
                                                                                <span>Nos études de cas</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item">
                                    <a href="/elao_/pr/42/nos-valeurs">
                                                                                <span>Nos valeurs</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item">
                                    <a href="/elao_/pr/42/la-tribu/">
                                                                                <span>La tribu</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item">
                                    <a href="/elao_/pr/42/blog/">
                                                                                <span>Blog</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item">
                                    <a href="/elao_/pr/42/contact">
                                                                                    <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                <span>Contact</span>
                                    </a>
                                </li>
                                                    </ul>
                    </nav>
                    <button class="nav-toggle nav-toggle--open">
                        <i class="icon icon--hamburger" aria-hidden="true"></i>
                        <span class="screen-reader">Ouvrir le menu</span>
                    </button>
                            </div>
        </header>
        <div class="container">
        <main>
              <img src="/elao_/pr/42/images/posts/thumbnails/yosemite.jpg" />

  <div>
    <img src="/elao_/pr/42/images/authors/vbouzeran.jpg" />
    <p>Écrit par Vincent BOUZERAN<p>
    <p>Publication 21 mai 2010<p>
    <p>Modification 21 septembre 2020<p>
  </div>

  <div>
          <a href="/elao_/pr/42/blog/tag/Bind">#Bind</a>
          <a href="/elao_/pr/42/blog/tag/Mac%20OSX">#Mac OSX</a>
          <a href="/elao_/pr/42/blog/tag/OSX">#OSX</a>
      </div>

  <div>
    <h1>Configuration de Bind sous Mac OS X</h1>
    <p>Configuration de Bind sous Mac OS X.</p>
  </div>

  <div>
    <body><p>Dans cet article, nous allons détailler pas à pas comment configurer le serveur Bind intégré à Mac Os X.
Les développeurs web sont souvent confrontés à des problématiques DNS (wildcards, etc...) pour lesquelles le fichier <strong>/etc/hosts</strong> s'avère insuffisant.</p>
<p>Cet article est traduit de <a href="http://www.macshadows.com/kb/index.php?title=How_To:_Enable_BIND_-_Mac_OS_X's_Built-in_DNS_Server" target="_blank">"How To: Enable BIND - Mac OS X's Built-in DNS Server"</a></p>
<h3 id="etape-configuration-de-rndc">Etape 1: Configuration de rndc<a href="#etape-configuration-de-rndc" class="anchor"></a></h3>
<p><strong>rndc</strong> est l'utilitaire qui permet la configuration du serveur DNS. Vous devez tout d'abord créer un fichier de configuration ainsi qu'une clé secrète.</p>
<p>Saisissez les commandes suivantes dans votre terminal pour générer le fichier de configuration et la clé secrète :</p>
<code id="677095399f3e5004ba3e9f04fb446da1" class="language-bash"><span class="token operator">&gt;</span> <span class="token function">sudo</span> -s
rndc-confgen -b <span class="token number">256</span> <span class="token operator">&gt;</span> /etc/rndc.conf
<span class="token function">head</span> -n5 /etc/rndc.conf <span class="token operator">|</span> <span class="token function">tail</span> -n4 <span class="token operator">&gt;</span> /etc/rndc.key</code>
<p>Attention : La commande r<strong>ndc-confgen</strong> est extrêmement pratique pour générer les fichiers de configurations <strong>rndc</strong>, mais il se peut qu'il initialise un port par défaut différent de celui de <strong>named</strong>.
Lancez les commandes suivantes, et assurez-vous que les ports sont identiques dans les deux fichiers de configurations /<strong>etc/named.conf</strong> et <strong>/etc/rndc.conf</strong>, si ce n'est pas le cas, éditez les fichiers et uniformisez les.</p>
<code id="1182500b7cda165a8ae996012626f04f" class="language-bash"><span class="token function">cat</span> /etc/named.conf <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'inet'</span>
<span class="token function">cat</span> /etc/rndc.conf <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'default-port'</span></code>
<h3 id="etape-activer-bind">Etape 2 : Activer BIND<a href="#etape-activer-bind" class="anchor"></a></h3>
<p>Nous devons maintenant configurer <strong>Bind</strong> pour qu'il se lance au démarrage. Pour se faire, on utilisera les commandes suivantes:</p>
<code id="adb544bb02d1df7b37e13ed817c8af62" class="language-bash">launchctl load -w /System/Library/LaunchDaemons/org.isc.named.plist
<span class="token builtin class-name">echo</span> <span class="token string">"launchctl start org.isc.named"</span> <span class="token operator">&gt;&gt;</span> /etc/launchd.conf</code>
<p>Puis nous n'avons plus qu'à démarrer le démon.</p>
<code id="2de3cb95d13ef660e22f1dd6c1f56927">/usr/bin/named</code>
<p>ou encore</p>
<code id="9dcf301b0891e82068cea12d40c395d6">launchctl start org.isc.named</code>
<h3 id="etape-configuration-de-named">Etape 3 : Configuration de named<br><a href="#etape-configuration-de-named" class="anchor"></a></h3>
<p>Cette étape peut nécessiter quelques recherches supplémentaires si vous avez des besoins très spécifiques.
Dans cet article, nous allons voir un cas simple de configuration où nous souhaitons que notre interface locale (localhost) réponde pour tous les dns de la forme <span class="inline-code">*.local</span>
Ce type de configuration peut être très utile pour les développeurs web qui souhaitent gagner du temps et éviter d'éditer systématiquement leur fichiers /etc/host lorsqu'ils rajoutent un virtualhost dans Apache.</p>
<p>La création de nouveaux dns passe par deux étapes. La première consiste à créer le fichier de zone correspondant à notre dns ".local", la seconde va permettre d'indiquer à named la nouvelle zone ainsi que l'emplacement du fichier de configuration associé.</p>
<p>1) Nous devons tout d'abord créer notre fichier de zone.</p>
<code id="b87253831ce3455a72e63c4d88c4b7e3">vi /var/named/local.zone</code>
<p>Passez en mode insertion (touche i) et copiez/collez la configuration suivante en remplaçant user.domain.com par votre adresse email (prenez garde à remplacer le "@" par un "." et suffixer également d'un ".").</p>
<code id="cc195fc327c4a4514a1dcd3702407361" class="language-bash"><span class="token variable">$TTL</span>    <span class="token number">86400</span>
<span class="token variable">$ORIGIN</span> local.
@       IN      SOA     localhost.      user.domain.com. <span class="token punctuation">(</span>
                                        <span class="token number">42</span>              <span class="token punctuation">;</span> serial
                                        3H              <span class="token punctuation">;</span> refresh
                                        15M             <span class="token punctuation">;</span> retry
                                        1W              <span class="token punctuation">;</span> expiry
                                        1D <span class="token punctuation">)</span>            <span class="token punctuation">;</span> minimum

                        1D IN NS        @
                        1D IN A         <span class="token number">127.0</span>.0.1

* IN A <span class="token number">127.0</span>.0.1</code>
<p>Assurez vous que la dernière ligne est vide, sauvegardez et quittez (ESC puis ":wq" et ENTER to sauvegarder et quitter sous <strong>VI</strong>).</p>
<p>2) Reconfiguration de named.conf pour indiquer notre nouvelle zone</p>
<code id="b10793dd0b6a4dc5b36c577caf3f8401">vi /etc/named.conf</code>
<p>Puis nous ajoutons les lignes suivantes à la suite des configurations de zones présentes:</p>
<code id="f4639e5bfef0a898648abb17c99dbb35" class="language-bash">zone <span class="token string">"local"</span> IN <span class="token punctuation">{</span>
        <span class="token builtin class-name">type</span> master<span class="token punctuation">;</span>
        <span class="token function">file</span> <span class="token string">"local.zone"</span><span class="token punctuation">;</span>
        allow-update <span class="token punctuation">{</span> none<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code>
<p>Sauvegardez et le tour est joué !</p>
<h3 id="etape-rechargement-de-la-con">Etape 4 : Rechargement de la configuration<a href="#etape-rechargement-de-la-con" class="anchor"></a></h3>
<p>A chaque fois que vous modifier les fichiers de configuration ou de zones, vous aurez besoin de recharger la configuration par la commande:</p>
<code id="5d35425ce8eca82e2ecf4ceb6971cd17">rndc reload</code>
<p>Vous pouvez également réinitialiser le cache DNS par la commande suivante:</p>
<code id="d80e1127b18b60148cdbe883e2374337">rndc flush</code></body>
  </div>

  <div>
    <img src="/elao_/pr/42/images/authors/vbouzeran.jpg" />

    <p>Écrit par Vincent BOUZERAN<p>

              <a href=Vincz>Github</a>
              <a href=http://www.elao.com>Website</a>
      </div>

  <h4>Ces articles pourraient vous intéresser:</h4>

        </main>
                    <footer class="footer">
                <section class="footer__links">
                    <p class="h1 h1--small">
                        elao
                        <span>développe</span>
                         <span>du lien</span>
                    </p>
                    <div class="links">
                        <ul>
                            <li>
                                <a href="#">Nos services</a>
                            </li>
                            <li>
                                <a href="#">Nos études de cas</a>
                            </li>
                            <li>
                                <a href="#">Blog</a>
                            </li>
                            <li>
                                <a href="#">Notre méthodologie</a>
                            </li>
                            <li>
                                <a href="#">La tribu</a>
                            </li>
                            <li>
                                <a href="#">Contact</a>
                            </li>
                            <li>
                                <a href="#">Nos valeurs</a>
                            </li>
                            <li>
                                <a href="#">Nous recrutons <span class="bullet">3</span></a>
                            </li>
                        </ul>
                    </div>
                    <div class="socials">
                        <ul>
                            <li>
                                <a href="#">
                                    <i class="icon icon--github"></i>
                                    Github
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="icon icon--twitter"></i>
                                    Twitter
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="icon icon--instagram"></i>
                                    Instagram
                                </a>
                            </li>
                        </ul>
                    </div>
                </section>
                <section class="footer__legals">
                    <span>© 2014/2020 - ELAO - Tous droits réservés</span>
                    <a href="#">Mentions légales</a>
                    <a href="#">Protection des données</a>
                </section>
            </footer>
        </div>
                            <script src="/elao_/pr/42/build/runtime.fba8f3d8.js"></script><script src="/elao_/pr/42/build/app.a7244376.js"></script>
                    </body>
</html>
