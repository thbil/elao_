<!DOCTYPE html>
<html lang="fr" class="no-js">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Installation de FUSE et s3fs sur une Debian Lenny</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/elao_/pr/338/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/elao_/pr/338/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/elao_/pr/338/favicon-16x16.png">
        <link rel="manifest" href="/elao_/pr/338/site.webmanifest">
        <link rel="mask-icon" href="/elao_/pr/338/safari-pinned-tab.svg" color="#ff4344">
        <link rel="shortcut icon" href="/elao_/pr/338/favicon.ico">
        <meta name="msapplication-TileColor" content="#ff4344">
        <meta name="msapplication-config" content="/elao_/pr/338/browserconfig.xml">
        <meta name="theme-color" content="#ffffff">

                    <meta name="description" content="Installation de FUSE et s3fs sur une Debian Lenny" />
            <link rel="canonical" href="https://elao.github.io/elao_/pr/338/blog/infra/installation-de-fuse-et-s3fs-sur-une-debian-lenny" />

            <!-- Open Graph / Facebook -->
            <meta property="og:title" content="Installation de FUSE et s3fs sur une Debian Lenny" />
            <meta property="og:locale" content="fr" />
            <meta property="og:description" content="Installation de FUSE et s3fs sur une Debian Lenny" />
            <meta property="og:url" content="https://elao.github.io/elao_/pr/338/blog/infra/installation-de-fuse-et-s3fs-sur-une-debian-lenny" />
            <meta property="og:site_name" content="elao_" />
                                        <meta property="og:image" content="/elao_/pr/338/images/posts/thumbnails/danbo_on_drops.jpg">
            
            <!-- Twitter -->
            <meta property="twitter:card" content="summary_large_image">
            <meta property="twitter:title" content="Installation de FUSE et s3fs sur une Debian Lenny">
            <meta property="twitter:description" content="Installation de FUSE et s3fs sur une Debian Lenny">
            <meta property="twitter:site" content="@elao">
            <meta property="twitter:creator" content="@elao">
                                        <meta property="twitter:image" content="https://elao.github.io/elao_/pr/338/images/posts/thumbnails/danbo_on_drops.jpg">
                    
                            <meta name="robots" content="noindex" />
        
        <script>
                        document.querySelector('html').classList.remove('no-js');
        </script>

                    <link rel="stylesheet" href="/elao_/pr/338/build/style.ddc1d4b6.css">
        
            </head>
    <body>
        <header class="header">
            <div class="container">
                                    <!--
                        Todo :
                        - only on homepage : on scroll .logo.logo--animated becomes .logo.logo--animated.logo--active (triggers its animation)
                     -->
                    <a href="/elao_/pr/338/">
                        <span class="screen-reader">Installation de FUSE et s3fs sur une Debian Lenny</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                                            </a>
                
                                    <!-- Desktop nav -->
                    <nav class="nav">
                        <ul>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/338/nos-services">
                                                                                <span>Services</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/338/methodologie">
                                                                                <span>Méthodologie</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/338/etudes-de-cas">
                                                                                <span>Études de cas</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/338/nos-valeurs">
                                                                                <span>Valeurs</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/338/la-tribu">
                                                                                <span>La tribu</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/338/blog">
                                                                                <span>Blog</span>
                                    </a>
                                </li>
                                                            <li class="nav__item">
                                    <a href="/elao_/pr/338/contact">
                                                                                    <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                <span>Contact</span>
                                    </a>
                                </li>
                                                    </ul>
                    </nav>
                
                                    <!-- Mobile nav -->
                    <nav class="nav-mobile">
                        <div class="nav-mobile__header">
                            <a href="/elao_/pr/338/">
                                                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 300 100" class="logo logo--animated">
                                <path d="M61.6,61.6H19.7C21,69,24.8,72.2,32.6,72.2c5.9,0,8.8-1.9,11.7-7.8l16.1,6.9C56.2,82,46.9,87.8,32.1,87.8
                                    c-19.1,0-32-12.6-32-31.6c0-19.5,12.6-32.6,31.4-32.6c18.1,0,30.3,12.6,30.3,31.6C61.7,57.2,61.7,58.9,61.6,61.6z M19.6,49.3h23.6
                                    c-0.2-7.9-4.1-10.9-11.3-10.9S20.7,41.8,19.6,49.3z"/>
                                <path d="M71.2,0.1H90v86.5H71.2V0.1z"/>
                                <path d="M166.1,24.7v61.8h-18.8V72.7c-3.5,9.8-10.5,15.1-20.4,15.1c-17.7,0-27.4-12.9-27.4-32
                                    c0-19.4,9.3-32.2,26.2-32.2c10.5,0,18,5.4,21.6,15.6V24.7H166.1z M147.9,55.7c0-10.4-4.8-15.2-15.1-15.2c-9.9,0-14.6,4.8-14.6,15.2
                                    c0,10.1,4.7,14.9,14.6,14.9C143.1,70.7,147.9,65.9,147.9,55.7L147.9,55.7z"/>
                                <path d="M242.8,55.8c0,19.9-15.3,32-33.6,32s-33.6-12.1-33.6-32s15.3-32.2,33.6-32.2S242.8,35.8,242.8,55.8z M224,55.8
                                    c0-10.4-4.7-15.2-14.8-15.2c-10.1,0-14.8,4.8-14.8,15.2c0,10.1,4.7,14.9,14.8,14.9S224,65.9,224,55.8L224,55.8z"/>
                                <rect x="243.1" y="86.5" width="56.7" height="15"/>
                            </svg>
                        
                            </a>
                            <button class="nav-toggle nav-toggle--close">
                                <i class="icon icon--close" aria-hidden="true"></i>
                                <span class="screen-reader">Fermer le menu</span>
                            </button>
                        </div>
                        <ul>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/338/nos-services">
                                                                                <span>Services</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/338/methodologie">
                                                                                <span>Méthodologie</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/338/etudes-de-cas">
                                                                                <span>Études de cas</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/338/nos-valeurs">
                                                                                <span>Valeurs</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/338/la-tribu">
                                                                                <span>La tribu</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item ">
                                    <a href="/elao_/pr/338/blog">
                                                                                <span>Blog</span>
                                    </a>
                                </li>
                                                            <li class="nav-mobile__item nav-mobile__item--large">
                                    <a href="/elao_/pr/338/contact">
                                                                                    <i class="icon icon--contact" aria-hidden="true"></i>
                                                                                <span>Contact</span>
                                    </a>
                                </li>
                                                    </ul>
                    </nav>
                    <button class="nav-toggle nav-toggle--open">
                        <i class="icon icon--hamburger" aria-hidden="true"></i>
                        <span class="screen-reader">Ouvrir le menu</span>
                    </button>
                            </div>
        </header>
        <div class="container">
        <main>
                <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="/elao_/pr/338/blog">
                <span itemprop="name">Blog</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumb__item"  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">Installation de FUSE et s3fs sur une Debian Lenny</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
    </ol>

    <div class="article-banner">
        <div class="article-banner__cover" style="background: #f1f1f1 url('/elao_/pr/338/resized/images/posts/thumbnails/danbo_on_drops.jpg/ee2af561cdc48d4080f0fd6a77249dac.jpg');
    background: #f1f1f1 -webkit-image-set(
        url('/elao_/pr/338/resized/images/posts/thumbnails/danbo_on_drops.jpg/ee2af561cdc48d4080f0fd6a77249dac.jpg') 1x,
        url('/elao_/pr/338/resized/images/posts/thumbnails/danbo_on_drops.jpg/27c6efae7c80ace630a4ddba4d191d0f.jpg') 2x
    );
    background: #f1f1f1 -moz-image-set(
        url('/elao_/pr/338/resized/images/posts/thumbnails/danbo_on_drops.jpg/ee2af561cdc48d4080f0fd6a77249dac.jpg') 1x,
        url('/elao_/pr/338/resized/images/posts/thumbnails/danbo_on_drops.jpg/27c6efae7c80ace630a4ddba4d191d0f.jpg') 2x
    );
    background: #f1f1f1 -ms-image-set(
        url('/elao_/pr/338/resized/images/posts/thumbnails/danbo_on_drops.jpg/ee2af561cdc48d4080f0fd6a77249dac.jpg') 1x,
        url('/elao_/pr/338/resized/images/posts/thumbnails/danbo_on_drops.jpg/27c6efae7c80ace630a4ddba4d191d0f.jpg') 2x
    );
    background: #f1f1f1 image-set(
        url('/elao_/pr/338/resized/images/posts/thumbnails/danbo_on_drops.jpg/ee2af561cdc48d4080f0fd6a77249dac.jpg') 1x,
        url('/elao_/pr/338/resized/images/posts/thumbnails/danbo_on_drops.jpg/27c6efae7c80ace630a4ddba4d191d0f.jpg') 2x
    );" data-aos="fade-down"></div>

        <div class="article-info" data-aos="zoom-in">
                                        <div class="article-author ">
                    <div class="article-author__image">
                                                    <a href="/elao_/pr/338/la-tribu/gfaivre">
                                <img     src="/elao_/pr/338/resized/images/members/avatars/gfaivre.jpg/ca2671c9059621e5245861b866405c1e.jpg"
    srcset="
        /elao_/pr/338/resized/images/members/avatars/gfaivre.jpg/ca2671c9059621e5245861b866405c1e.jpg 1x,
        /elao_/pr/338/resized/images/members/avatars/gfaivre.jpg/2d8139fabce1703cbfc2438bce9b38a3.jpg 2x
    "
 />
                            </a>
                                            </div>
                    <span class="article-author__info">
                    Écrit par
                                            <a href="/elao_/pr/338/la-tribu/gfaivre">
                            <strong>Guewen Faivre</strong>
                        </a>
                                      </span>
                </div>
                        <div class="article-info__date">
                <span>Publication <strong>12 janvier 2010</strong></span>
                            </div>
        </div>

        <div class="article-header" data-aos="zoom-in-up">
            <h1>Installation de FUSE et s3fs sur une Debian Lenny</h1>
            <p>Installation de FUSE et s3fs sur une Debian Lenny</p>
            <ul class="article-tag-list">
                                    <li class="article-tag-list__item">
                        <a href="/elao_/pr/338/blog/tag/linux" rel="nofollow">#Linux</a>
                    </li>
                                    <li class="article-tag-list__item">
                        <a href="/elao_/pr/338/blog/tag/fuse" rel="nofollow">#Fuse</a>
                    </li>
                                    <li class="article-tag-list__item">
                        <a href="/elao_/pr/338/blog/tag/s3fs" rel="nofollow">#S3fs</a>
                    </li>
                            </ul>
        </div>
    </div>

    
    <div class="article-content">
        <main class="article-content__main">

            
            <body><p>Aujourd'hui nous allons installer s3fs sur nos serveurs.
Ce paquet permet de monter des systèmes de fichiers distant de type Amazon S3. Les applications peuvent êtres multiples, le but avoué étant d'avoir la possibilité d'avoir notre "bucket" Amazon S3 disponible localement.</p>
<p><strong>Pour se faire :</strong></p>
<ul>
<li>Installez les paquets suivants, nécessaire à la compilation des sources:</li>
</ul>
<pre class="code-multiline"><code id="27187d4d6f7b213f9945f15d180eaa78">apt-get install build-essential libcurl4-openssl-dev libxml2-dev libfuse-dev comerr-dev libfuse2 libidn11-dev libkadm55 libkrb5-dev libldap2-dev libselinux1-dev libsepol1-dev pkg-config fuse-utils</code></pre>
<p>Récupérer la dernière version des sources s3fs sur le <a href="http://code.google.com/p/s3fs/downloads/list" target="_blank">Google Code project</a> (version 118 au moment où j'écris ce billet):</p>
<pre class="code-multiline"><code id="d7bb181b796e1b71b59184862c12eaff">wget http://s3fs.googlecode.com/files/s3fs-r188-source.tar.gz</code></pre>
<ul>
<li>Compiler les sources</li>
</ul>
<pre class="code-multiline"><code id="e3a9653787a44f46bec77913423be855">cd s3fs
make
make install</code></pre>
<p>Une fois ces 3 étapes accomplies le système est prêt nous allons pouvoir monter notre système de fichier.</p>
<p>Commençons par modifier la configuration de FUSE en dé-commentant la ligne user_allow_other, et c'est parti pour le montage du notre S3 bucket:</p>
<pre class="code-multiline"><code id="ce269629c48e6028f7b0620b2f49b373">sudo mkdir -p /mnt/s3
s3fs bucketname -o accessKeyId=XXX -o secretAccessKey=YYY -o use_cache=/tmp -o allow_other /mnt/s3</code></pre>
<p>accessKeyId: Votre "Amazon Access Key"
secretAccessKey: Votre "Secret Key"</p>
<p>L'option <strong>use_cache</strong> permet d'indiquer à s3fs de cacher les fichiers du <em>bucket</em> Amazon localement (dans /tmp en l'occurrence), l'option allow_other permet quant à elle d'autoriser des utilisateurs non root à manipuler les fichiers du montage.
N'hésitez pas à jeter un oeil au wiki du projet en cas de problème: <a href="http://code.google.com/p/s3fs/wiki/FuseOverAmazon" target="_blank">wiki</a>.</p>
<p>A présent tous les fichiers écrits dans /mnt/s3 seront en fait écris dans votre espace Amazon S3.</p>
<p>Si vous êtes comme moi et que vous n'aimez pas laisser trainer des mots de passe, clés et autre dans les lignes de commande vous pouvez conserver votre couple **</p>
<pre class="code-multiline"><code id="a44eced9350048888703f332c82406c2">accessKeyId /</code></pre>
<pre class="code-multiline"><code id="24cd0e1d8537fa834bccbbaa02a09fd7">secretAccessKey</code></pre>
<p>dans le fichier</p>
<pre class="code-multiline"><code id="c642e064b0ec4e92b57068b23a174fb0">/etc/passwd-s3fs</code></pre>
<p>sous la forme d'une seule ligne formatée comme ceci:</p>
<pre class="code-multiline"><code id="21b24ddaab4d737331c6c95aa50c7b60">accessKeyId:secretAccessKey</code></pre>
<p>Nous obtenons dans ce cas la ligne de commande suivante:</p>
<pre class="code-multiline"><code id="d44d28cd074bfd2878579345a71fc76c">s3fs bucketname -o use_cache=/tmp -o allow_other /mnt/s3</code></pre>
<p><em>(Le fichier /etc/passwd-s3fs est lu automatiquement)</em></p></body>
                                                </main>
        <aside class="article-content__aside">
                    </aside>
    </div>

    <div class="article-footer" data-aos="fade-in">
                                    <div class="article-author">
                    <div class="article-author__image">
                        <a href="/elao_/pr/338/la-tribu/gfaivre">
                            <img     src="/elao_/pr/338/resized/images/members/avatars/gfaivre.jpg/ca2671c9059621e5245861b866405c1e.jpg"
    srcset="
        /elao_/pr/338/resized/images/members/avatars/gfaivre.jpg/ca2671c9059621e5245861b866405c1e.jpg 1x,
        /elao_/pr/338/resized/images/members/avatars/gfaivre.jpg/2d8139fabce1703cbfc2438bce9b38a3.jpg 2x
    "
 />
                        </a>
                    </div>
                    <span class="article-author__info">
                        Écrit par
                        <a href="/elao_/pr/338/la-tribu/gfaivre">
                            <strong>Guewen Faivre</strong>
                        </a>
                    </span>

                    <div class="article-author__social">
                                                    <a href="https://twitter.com/guewen_faivre" class="social social--small">
                                <i class="icon icon--twitter" aria-hidden="true"></i>
                                <span class="screen-reader">Compte twitter de Guewen Faivre</span>
                            </a>
                                                                            <a href="https://github.com/gfaivre " class="social social--small">
                                <i class="icon icon--github" aria-hidden="true"></i>
                                <span class="screen-reader">Compte github de Guewen Faivre</span>
                            </a>
                                                                            <a href="http://www.elao.com" class="social social--small">
                                <i class="icon icon--website" aria-hidden="true"></i>
                                <span class="screen-reader">Site personnel de Guewen Faivre</span>
                            </a>
                                            </div>
                </div>
                        </div>

            <div class="bricks">
            
                            <div class="brick-contribute">
                    <p>
                        Une typo ?
                        <a href="https://github.com/Elao/elao_/edit/better-buttons/content/blog/infra/installation-de-fuse-et-s3fs-sur-une-debian-lenny.md/" target="_blank" class="animated-link animated-link--light">
                            Modifier cet article sur Github
                        </a>
                    </p>
                </div>
                    </div>
            </main>
                    <footer class="footer">
                <section class="footer__links">
                    <p class="h1">
                        elao
                        <span>développe</span>
                         <span>du lien</span>
                    </p>
                    <div class="links">
                                                    <ul>
                                                            <li>
                                    <a href="/elao_/pr/338/nos-services">Services</a>
                                </li>
                                                            <li>
                                    <a href="/elao_/pr/338/methodologie">Méthodologie</a>
                                </li>
                                                            <li>
                                    <a href="/elao_/pr/338/etudes-de-cas">Études de cas</a>
                                </li>
                                                        </ul>
                                                    <ul>
                                                            <li>
                                    <a href="/elao_/pr/338/nos-valeurs">Valeurs</a>
                                </li>
                                                            <li>
                                    <a href="/elao_/pr/338/la-tribu">La tribu</a>
                                </li>
                                                            <li>
                                    <a href="/elao_/pr/338/blog">Blog</a>
                                </li>
                                                        </ul>
                                                    <ul>
                                                            <li>
                                    <a href="/elao_/pr/338/contact">Contact</a>
                                </li>
                                                        </ul>
                                                <ul>
                            <li>
                                                                <a href="/elao_/pr/338/recrutement">
                                    Nous recrutons
                                                                            <span class="bullet">1</span>
                                                                    </a>
                            </li>
                        </ul>
                    </div>
                    <div class="socials">
                        <ul>
                            <li>
                                <a href="https://github.com/elao" target="_blank">
                                    <i class="icon icon--github"></i>
                                    Github
                                </a>
                            </li>
                            <li>
                                <a href="https://twitter.com/elao" target="_blank">
                                    <i class="icon icon--twitter"></i>
                                    Twitter
                                </a>
                            </li>
                            <li>
                                <a href="https://www.instagram.com/hello_elao_/" target="_blank">
                                    <i class="icon icon--instagram"></i>
                                    Instagram
                                </a>
                            </li>
                        </ul>
                    </div>
                </section>
                <section class="footer__legals">
                    <span>© 2005 - 2021 - ELAO - Tous droits réservés</span>
                    <a href="/elao_/pr/338/legal">Mentions légales</a>
                    <a href="/elao_/pr/338/confidentialite">Protection des données</a>
                </section>
            </footer>
        </div>
                                <script src="/elao_/pr/338/build/runtime.67ea16f5.js" defer></script><script src="/elao_/pr/338/build/40.38998a60.js" defer></script><script src="/elao_/pr/338/build/app.118167f3.js" defer></script>
        

        </body>
</html>
